<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Tarot Reading üîÆ</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #000;
      font-family: "Segoe UI", sans-serif;
    }

    #backBtn {
      position: fixed;
      top: 20px;
      left: 20px;
      padding: 10px 18px;
      background: rgba(255, 255, 255, 0.15);
      border: 1px solid #fff;
      border-radius: 8px;
      color: #fff;
      cursor: pointer;
      transition: 0.3s;
      z-index: 10;
    }

    #backBtn:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    #title {
      position: fixed;
      top: 25px;
      left: 50%;
      transform: translateX(-50%);
      color: #fff8e1;
      font-size: 28px;
      text-shadow: 0 0 10px #d6b0ff;
      letter-spacing: 1px;
      z-index: 10;
    }

    .fortune {
      position: fixed;
      width: 100%;
      text-align: center;
      font-size: 20px;
      color: #ffe8ff;
      text-shadow: 0 0 10px #d6b0ff;
      line-height: 1.6em;
      opacity: 0;
      transition: opacity 1s ease;
      display: none;
      z-index: 5;
      bottom: 120px;
    }

    #fortune1 {
      left: 20%;
      transform: translateX(-50%);
    }

    #fortune2 {
      left: 50%;
      transform: translateX(-50%);
    }

    #fortune3 {
      left: 80%;
      transform: translateX(-50%);
    }
  </style>

  <!-- Three.js -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
</head>

<body>
  <div id="backBtn" onclick="window.location.href='./Tarot.html'">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</div>
  <div id="title">‚ú® ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏û‡πà‡∏î‡∏µ‡πÜ ‡∏ô‡πâ‡∏≤ ‚ú®</div>

  <!--‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢ -->
  <div id="fortune1" class="fortune">üí´ ‡πÑ‡∏û‡πà‡πÉ‡∏ö‡∏ó‡∏µ‡πà 1 ‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ß‡πà‡∏≤...‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏£‡∏á‡∏™‡∏µ‡∏ü‡∏±‡∏ô‡∏ö‡πà‡∏≠‡∏¢‡πÜ 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ï‡πà‡∏≠ 1 ‡∏≠‡∏±‡∏ô
    <br>‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏•‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏ô‡πâ‡∏≥‡∏Ñ‡∏•‡∏≠‡∏á‡πÉ‡∏ô‡πÉ‡∏à‡∏Å‡∏•‡∏≤‡∏á‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø ‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏Ç‡∏≤‡∏î
  </div>
  <div id="fortune2" class="fortune">üí´ ‡πÑ‡∏û‡πà‡πÉ‡∏ö‡∏ó‡∏µ‡πà 2 ‡∏ß‡πà‡∏≤‡πÑ‡∏ß‡πâ... ‡∏ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏£‡πâ‡∏≠‡∏ô‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÉ‡∏™‡πà‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏ô‡∏≤‡∏ß
    ‡∏ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏¢‡πá‡∏ô‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏î‡∏∑‡πà‡∏°‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á <br>‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏´‡πá‡∏ô‡∏û‡∏±‡∏î‡∏•‡∏°‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏´‡∏°‡∏∏‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏≠‡∏≤‡∏°‡∏∑‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÅ‡∏´‡∏¢‡πà ‡∏°‡∏¥‡∏â‡∏∞‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏à‡∏∞‡∏≠‡∏≠‡∏Å‡πÑ‡∏î‡πâ</div>
  <div id="fortune3" class="fortune">üí´ ‡πÑ‡∏û‡πà‡πÉ‡∏ö‡∏ó‡∏µ‡πà 3 ‡∏î‡∏≤‡∏ß‡∏û‡∏•‡∏π‡πÇ‡∏ï‡∏≠‡∏¢‡∏π‡πà‡∏´‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î ‡∏ï‡∏∑‡πà‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏Ñ‡∏ß‡∏£‡πÅ‡∏Å‡πâ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏î‡πâ‡∏ß‡∏¢
    <br>‡∏Å‡∏≤‡∏£‡∏ö‡∏¥‡∏î‡∏Ç‡∏µ‡πâ‡πÄ‡∏Å‡∏µ‡∏¢‡∏à ‡πÅ‡∏•‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏õ‡∏£‡∏á‡∏ü‡∏±‡∏ô‡πÅ‡∏Å‡πâ‡∏õ‡∏≤‡∏Å‡πÄ‡∏´‡∏°‡πá‡∏ô
  </div>

  <script>
    const scene = new THREE.Scene();

    //‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
    const textureLoader = new THREE.TextureLoader();
    textureLoader.load("./bg.png", tex => scene.background = tex);

    //‡∏Å‡∏•‡πâ‡∏≠‡∏á
    const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 2000);
    camera.position.set(0, 200, 600);
    camera.lookAt(0, 100, 0);

    //Renderer
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    //Controls
    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.enableZoom = true;
    controls.enableRotate = true;
    controls.minDistance = 300;
    controls.maxDistance = 1000;
    controls.target.set(0, 100, 0);

    //‡πÅ‡∏™‡∏á
    const ambient = new THREE.AmbientLight(0xffffff, 0.8);
    const spot = new THREE.SpotLight(0xffeecc, 1.3);
    spot.position.set(200, 400, 300);
    scene.add(ambient, spot);

    //‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏û‡πà
    const loader = new THREE.GLTFLoader();
    const cards = [];
    const cardFiles = ["./Card01-1.glb", "./Card02-2.glb", "./Card03-1.glb"];
    const fortunes = [
      document.getElementById("fortune1"),
      document.getElementById("fortune2"),
      document.getElementById("fortune3")
    ];

    const clock = new THREE.Clock();

    //‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏û‡πà
    cardFiles.forEach((file, i) => {
      loader.load(file, (gltf) => {
        const card = gltf.scene;
        card.scale.set(80, 80, 80);
        card.position.set((i - 1) * 220, 50, 0);
        card.userData.index = i + 1;
        card.traverse(obj => { if (obj.isMesh) obj.userData.parentIndex = i + 1; });
        scene.add(card);
        cards.push(card);
      });
    });

    //‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏ù‡∏∏‡πà‡∏ô
    const particleCount = 600;
    const particleGeometry = new THREE.BufferGeometry();
    const particlePositions = new Float32Array(particleCount * 3);
    for (let i = 0; i < particleCount * 3; i++)
      particlePositions[i] = (Math.random() - 0.5) * 2000;
    particleGeometry.setAttribute("position", new THREE.BufferAttribute(particlePositions, 3));
    const particleMaterial = new THREE.PointsMaterial({
      color: 0xffaaff,
      size: 4,
      transparent: true,
      opacity: 0.7,
      blending: THREE.AdditiveBlending
    });
    const particles = new THREE.Points(particleGeometry, particleMaterial);
    scene.add(particles);

    //‡∏´‡∏°‡∏≠‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
    const fogTex = textureLoader.load("./bg.png");
    const fogPlane = new THREE.Mesh(
      new THREE.PlaneGeometry(3000, 2000),
      new THREE.MeshBasicMaterial({ map: fogTex, transparent: true, opacity: 0.05 })
    );
    fogPlane.position.set(0, 200, -600);
    scene.add(fogPlane);

    //‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏û‡πà
    const raycaster = new THREE.Raycaster();
    const mouse = new THREE.Vector2();

    window.addEventListener("click", (event) => {
      mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
      mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
      raycaster.setFromCamera(mouse, camera);

      const clickable = [];
      cards.forEach(card => card.traverse(obj => { if (obj.isMesh) clickable.push(obj); }));
      const intersects = raycaster.intersectObjects(clickable, true);

      fortunes.forEach(f => { f.style.display = "none"; f.style.opacity = 0; });

      if (intersects.length > 0) {
        const id = intersects[0].object.userData.parentIndex;
        if (!id) return;

        const f = fortunes[id - 1];
        setTimeout(() => {
          f.style.display = "block";
          setTimeout(() => { f.style.opacity = 1; }, 100);
        }, 300);
      }
    });

    //Loop
    function animate() {
      requestAnimationFrame(animate);
      const t = clock.getElapsedTime();

      //‡πÑ‡∏û‡πà‡∏•‡∏≠‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏•‡∏á
      cards.forEach((card, i) => {
        card.position.y = 50 + Math.sin(t * 2 + i) * 4;
      });

      //‡∏ù‡∏∏‡πà‡∏ô‡∏´‡∏°‡∏∏‡∏ô + ‡∏´‡∏°‡∏≠‡∏Å
      particles.rotation.y = t * 0.1;
      fogPlane.position.z = -600 + Math.sin(t * 0.3) * 50;

      controls.update();
      renderer.render(scene, camera);
    }
    animate();

    // Resize
    window.addEventListener("resize", () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>

</html>

